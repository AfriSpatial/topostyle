Blueprint and Issues
====================

Sample data
-----------
To avoid having to obtain and load four DVDs from NGI, generate a fake island in the middle of the ocean outside the bounding box of South Africa, with samples of every layer and class, so that the whole map can be tested in one place. All in one SpatiaLite file.

PostGIS loader script
---------------------
Improve and port to Python

Desktop GIS project files
-------------------------
Commit generic QGIS and other project files that can be used to view SpatiaLite / PostGIS / WMS / GWC layers, without giving away passwords.

Auto-Generate an NGI-standard map legend
-----------------------------------
With WMS GetLegendGraphic or something a bit more sophisicated.

Known Issues or SLD or Layer problems
=====================================

Labelling filters
-----------------

All the layers which needed labels were labelled using the advanced feature label tool in QGIS but the problem is that when the style is saved as an SLD the labelling is not incorporated hence the need to edit the SLD according to the specifications to add labels.

In the manual editing of SLD to incorporate labels the following layers provided dificulties we could not find a way to get around. The labels need regular expressions and specifying them in SLD proved difficult.

Examples of labels based upon the advanced labelling feauture in QGIS.

* controlpointpoint

>case when  "feat_type" = 'BOUNDARY BEACON' then null
>else toint( "height" )
>end

The label uses the case statement to specify which fields need to be labelled and which attribute is to be used for the label hence eliminating the need to bring in the layer more than once.
 
* structurepoint

>case
>      when  "feat_type"  =   'MICROWAVE TOWER' then null
>      when  "feat_type"  =  'TELECOM TOWER' then null
>      when  "feat_type"  =  'TUNNEL ENTRANCE' then null
>else  "feat_type" 
>end

List of layers that used special advanced labelling features.

* airtransport
* topopointpoint
* boundaryareaarea.
* landusearea

Since the column that was being used to label the features contained a mixture of string data and integer data and we only wanted to label feautures based on string, we used the following labelling condition on the advanced labelling feature.

>CASE WHEN "tag" ~ '^[0-9]+$'  THEN NULL 
>ELSE "tag"  END

For landusearea, 'Recreational' Area needed to be labelled using the following.

>substr( "feat_type",0,4)

Issues with sld generated by QGIS
---------------------------------

* Labels did not appear in the sld generated by qgis as explained above, so manual editing is needed for the sld according to specifications in order to incorporate labels. But once the sld are edited the work fine in QGIS.

* QGIS does not incoporate regular expressions used in labelling when making its SLD document.

* QGIS sld tended to make most of the solid lines appear dashed and vice versa in the SLD so there was a need to check the structure of the SLD once it was saved and tweak it where necessary.





